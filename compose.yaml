services:
  asset-server:
    build:
      context: .
      dockerfile: docker/frankenphp/Dockerfile.frankenphp
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - .:/app
    environment:
      - PHP_IDE_CONFIG=serverName=asset-server
      - APP_ENV=${APP_ENV:-development}
      - CADDY_GLOBAL_OPTIONS=${CADDY_GLOBAL_OPTIONS:-}
      - FRANKENPHP_CONFIG=${FRANKENPHP_CONFIG:-}
      - SERVER_NAME=${SERVER_NAME:-:80}
      # Xdebug configuration
      - XDEBUG_MODE=${XDEBUG_MODE:-debug,develop}
      - XDEBUG_CLIENT_HOST=${XDEBUG_CLIENT_HOST:-host.docker.internal}
      - XDEBUG_CLIENT_PORT=${XDEBUG_CLIENT_PORT:-9003}
      - XDEBUG_START_WITH_REQUEST=${XDEBUG_START_WITH_REQUEST:-yes}
      - XDEBUG_IDEKEY=${XDEBUG_IDEKEY:-VSCODE}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # networks:
    #   - zestic-api-network
    restart: unless-stopped

# networks:
#   zestic-api-network:
#     external: true